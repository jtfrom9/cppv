TESTBENCH_LIB = libvpicpp-vcs.so

ifeq ($(strip $(VCS_HOME)),)
	VCS_HOME=/opt/synopsys/latest
endif

CFLAGS += -I$(VCS_HOME)/include

SIMBIN = $(TEST)_simv

$(SIMBIN): $(RTLFILES) 
	$(VCS_HOME)/bin/vcs +vpi +v2k -debug_pp +cli $^ -load $(TESTBENCH_LIB):$(INITCALLBACK) -o$@

sim: lib $(SIMBIN)

RUN_COMMAND=LD_LIBRARY_PATH=$(shell pwd) $(SIMBIN) -l $(SIMBIN).log

build: sim

.PHONY: cleansim
cleansim:
	rm -rf csrc simv* ucli.key $(SIMBIN) $(SIMBIN).log


